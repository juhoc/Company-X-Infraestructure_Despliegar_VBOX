- name: Prueba agrupando eco de recursos
  set_fact:
    vmsource: |
      {% if 'small' in vmsources %}
      1,1024,56320
      {% elif 'medium' in vmsources %}
      1,2048,56320
      {% elif 'large' in vmsources %}
      2,2048,56320
      {% elif 'xlarge' in vmsources %}
      2,3072,56320
      {% endif %}

- name: Prueba de varibles
  debug:
    msg: 
      - "{{ idcrqinc }}"
      - "{{ vmname }}"
      - "{{ vmostype }}"
      - "{{ vmsource | trim }}"

- name: Prueba agrupando eco de recursos
  set_fact:
    vmcpu: "{{ vmsource.split(',')[0] }}"
    vmmemry: "{{ vmsource.split(',')[1] }}"
    vmdisk: "{{ vmsource.split(',')[2] }}"