- name: Recursos VM {{ vmostype }} - {{ vmname }} en VirtuaBox
  set_fact:
    vmsource: |
      {% if 'small' in vmsources %}
      1,1024,56320
      {% elif 'medium' in vmsources %}
      1,2048,56320
      {% elif 'large' in vmsources %}
      2,2048,56320
      {% elif 'xlarge' in vmsources %}
      2,3072,56320
      {% endif %}

- name: Recursos seleccionados para la creacion de la VM
  debug:
    msg: 
      - "Tipo: {{ vmostype }}"
      - "Nombre: {{ vmname }}"
      - "Vitualizador: VirtuaBox"
      - "Numero de CPU's: {{ vmsource.split(',')[0] | trim }}"
      - "Cantidad de Memoria: {{ vmsource.split(',')[1] | trim }}"
      - "Tama√±o disco extra: {{ vmsource.split(',')[2] | trim }}"

- name: Ambiente VM {{ vmostype }} - {{ vmname }} en VirtuaBox
  set_fact:
    vmenv: |
      {% if 'vp' in vmname %}
      produccion,pr
      {% elif 'vd' in vmname %}
      desarrollo,ds
      {% elif 'vlo' in vmname %}
      liga oculta,lo
      {% endif %}

- set_fact:
    vmcpu: "{{ vmsource.split(',')[0] | trim }}"
    vmmem: "{{ vmsource.split(',')[1] | trim }}"
    vmdsk: "{{ vmsource.split(',')[2] | trim }}"